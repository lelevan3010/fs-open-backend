(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(16),o=n.n(c),a=(n(22),n(3)),i=n(5),u=n.n(i),d="/api/persons",l={getAllPersons:function(){return u.a.get(d).then((function(e){return e.data}))},createPerson:function(e){return u.a.post(d,e).then((function(e){return e.data}))},updatePerson:function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},j=n(0);var f=function(e){var t=e.persons,n=e.setFilteredPersons;return Object(j.jsxs)("span",{children:["filter shown with",Object(j.jsx)("input",{onChange:function(e){e.preventDefault();var r=t.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));n(r)}})]})},b=n(17);var h=function(e){var t=e.type,n=e.message,r=e.isOpen,s=e.setIsOpen,c={display:"flex",backgroundColor:"danger"===t?"red":"green",margin:0,padding:10,textAlign:"center",color:"white"};return r?(setTimeout((function(){s(!1)}),5e3),Object(j.jsx)("div",{style:{position:"absolute",width:"100%",display:"flex",top:0,justifyContent:"center"},children:Object(j.jsx)("h4",{style:c,children:n})})):Object(j.jsx)(j.Fragment,{})};var p=function(e){var t=e.setNewName,n=e.setNewNumber,s=e.persons,c=e.newName,o=e.setPersons,i=e.newNumber,u=Object(r.useState)(!1),d=Object(a.a)(u,2),f=d[0],p=d[1],O=Object(r.useState)(""),m=Object(a.a)(O,2),g=m[0],v=m[1],x=Object(r.useState)("success"),w=Object(a.a)(x,2),P=w[0],N=w[1];return Object(j.jsxs)("form",{children:[Object(j.jsx)(h,{type:P,isOpen:f,setIsOpen:p,message:g}),Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:function(e){e.preventDefault(),t(e.target.value)}})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:function(e){e.preventDefault(),n(e.target.value)}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=s.filter((function(e){return e.name===c}));if(console.log("filtered",t),t.length>0){if(!1===window.confirm("".concat(c," already added, replace old number with new one?")))return;l.updatePerson(t[0].id,{name:c,number:i}).then((function(e){v("".concat(e.name," was updated")),p(!0),N("success"),o((function(n){return n.map((function(n,r){return t[0].id===n.id?e:n}))}))})).catch((function(e){N("danger"),v(e.response.data.error),p(!0)}))}else l.createPerson({name:c,number:i}).then((function(e){console.log(e),v("".concat(e.name," was created")),p(!0),N("success"),o([].concat(Object(b.a)(s),[e]))})).catch((function(e){N("danger"),v(e.response.data.error),p(!0)}))},children:"add"})})]})};var O=function(e){var t=e.filteredPersons,n=e.setFilteredPersons,r=e.persons,s=e.setPersons,c=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{style:{display:"inline"},children:[e.name," ",e.number]}),Object(j.jsx)("button",{onClick:function(c){return function(e,c){e.preventDefault(),!1!==window.confirm("Are you sure to delete ".concat(c.name,"?"))&&l.deletePerson(c.id).then((function(){var e=r.filter((function(e){return e.id!==c.id}));if(s(e),t.length>0){var o=t.filter((function(e){return e.id!==c.id}));n(o)}}))}(c,e)},children:"delete"})]},e.name)};return Object(j.jsx)(j.Fragment,{children:t.length>0?t.map((function(e){return c(e)})):r.map((function(e){return c(e)}))})},m=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)([]),o=Object(a.a)(c,2),i=o[0],u=o[1],d=Object(r.useState)(""),b=Object(a.a)(d,2),h=b[0],m=b[1],g=Object(r.useState)(""),v=Object(a.a)(g,2),x=v[0],w=v[1];return Object(r.useEffect)((function(){l.getAllPersons().then((function(e){return s(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(f,{persons:n,setFilteredPersons:u}),Object(j.jsx)("h2",{children:"Add new"}),Object(j.jsx)(p,{setNewName:m,setNewNumber:w,persons:n,newName:h,setPersons:s,newNumber:x}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(O,{filteredPersons:i,setFilteredPersons:u,persons:n,setPersons:s})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root")),g()}},[[42,1,2]]]);
//# sourceMappingURL=main.acea8e01.chunk.js.map