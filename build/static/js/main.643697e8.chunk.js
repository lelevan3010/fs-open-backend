(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(16),o=n.n(s),i=(n(22),n(3)),a=n(5),u=n.n(a),l="http://localhost:3001/api/persons",d={getAllPersons:function(){return u.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return u.a.post(l,e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},updatePerson:function(e,t){return u.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},deletePerson:function(e){return u.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},j=n(0);var f=function(e){var t=e.persons,n=e.setFilteredPersons;return Object(j.jsxs)("span",{children:["filter shown with",Object(j.jsx)("input",{onChange:function(e){e.preventDefault();var r=t.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));n(r)}})]})},b=n(17);var h=function(e){var t=e.type,n=e.message,r=e.isOpen,c=e.setIsOpen,s={display:"flex",backgroundColor:"danger"===t?"red":"green",margin:0,padding:10,textAlign:"center",color:"white"};return r?(setTimeout((function(){c(!1)}),5e3),Object(j.jsx)("div",{style:{position:"absolute",width:"100%",display:"flex",top:0,justifyContent:"center"},children:Object(j.jsx)("h4",{style:s,children:n})})):Object(j.jsx)(j.Fragment,{})};var p=function(e){var t=e.setNewName,n=e.setNewNumber,c=e.persons,s=e.newName,o=e.setPersons,a=e.newNumber,u=Object(r.useState)(!1),l=Object(i.a)(u,2),f=l[0],p=l[1],O=Object(r.useState)(""),m=Object(i.a)(O,2),g=m[0],v=m[1],x=Object(r.useState)("success"),w=Object(i.a)(x,2),P=w[0],y=w[1];return Object(j.jsxs)("form",{children:[Object(j.jsx)(h,{type:P,isOpen:f,setIsOpen:p,message:g}),Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:function(e){e.preventDefault(),t(e.target.value)}})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:function(e){e.preventDefault(),n(e.target.value)}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=c.filter((function(e){return e.name===s}));if(console.log("filtered",t),t.length>0){if(!1===window.confirm("".concat(s," already added, replace old number with new one?")))return;d.updatePerson(t[0].id,{name:s,number:a}).then((function(e){v("".concat(e.name," was updated")),p(!0),y("success"),o((function(n){return n.map((function(n,r){return t[0].id===n.id?e:n}))}))})).catch((function(e){v("Information already removed in server"),p(!0),y("danger")}))}else d.createPerson({name:s,number:a}).then((function(e){v("".concat(e.name," was created")),p(!0),y("success"),o([].concat(Object(b.a)(c),[e]))}))},children:"add"})})]})};var O=function(e){var t=e.filteredPersons,n=e.setFilteredPersons,r=e.persons,c=e.setPersons,s=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{style:{display:"inline"},children:[e.name," ",e.number]}),Object(j.jsx)("button",{onClick:function(s){return function(e,s){e.preventDefault(),!1!==window.confirm("Are you sure to delete ".concat(s.name,"?"))&&d.deletePerson(s.id).then((function(){var e=r.filter((function(e){return e.id!==s.id}));if(c(e),t.length>0){var o=t.filter((function(e){return e.id!==s.id}));n(o)}}))}(s,e)},children:"delete"})]},e.name)};return Object(j.jsx)(j.Fragment,{children:t.length>0?t.map((function(e){return s(e)})):r.map((function(e){return s(e)}))})},m=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),o=Object(i.a)(s,2),a=o[0],u=o[1],l=Object(r.useState)(""),b=Object(i.a)(l,2),h=b[0],m=b[1],g=Object(r.useState)(""),v=Object(i.a)(g,2),x=v[0],w=v[1];return Object(r.useEffect)((function(){d.getAllPersons().then((function(e){return c(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(f,{persons:n,setFilteredPersons:u}),Object(j.jsx)("h2",{children:"Add new"}),Object(j.jsx)(p,{setNewName:m,setNewNumber:w,persons:n,newName:h,setPersons:c,newNumber:x}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(O,{filteredPersons:a,setFilteredPersons:u,persons:n,setPersons:c})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),s(e),o(e)}))};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root")),g()}},[[42,1,2]]]);
//# sourceMappingURL=main.643697e8.chunk.js.map